{% extends 'payments/base.html' %}

{% block content %}
<h1>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–ø–ª–∞—Ç</h1>

<h2>üßæ –°—É–º–º–∞ –æ–ø–ª–∞—Ç –ø–æ –∫—É—Ä—Å–∞–º</h2>
<canvas id="chartCourses" width="600" height="400"></canvas>

<h2>üìÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–ª–∞—Ç –ø–æ –º–µ—Å—è—Ü–∞–º</h2>
<canvas id="chartMonths" width="600" height="400"></canvas>

<!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // –î–∞–Ω–Ω—ã–µ –∏–∑ Django (–≤—Å—Ç–∞–≤–ª–µ–Ω—ã –∫–∞–∫ JSON)
    const courseLabels = {{ course_labels|safe }};
    const courseValues = {{ course_values|safe }};
    const monthLabels = {{ month_labels|safe }};
    const monthValues = {{ month_values|safe }};

    // –ì—Ä–∞—Ñ–∏–∫: —Å—É–º–º–∞ –ø–æ –∫—É—Ä—Å–∞–º
    new Chart(document.getElementById('chartCourses'), {
        type: 'bar',
        data: {
            labels: courseLabels,
            datasets: [{
                label: '–°—É–º–º–∞ –æ–ø–ª–∞—Ç (‚ÇΩ)',
                data: courseValues,
                backgroundColor: '#4CAF50'
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: { beginAtZero: true }
            }
        }
    });

    // –ì—Ä–∞—Ñ–∏–∫: –æ–ø–ª–∞—Ç—ã –ø–æ –º–µ—Å—è—Ü–∞–º
    new Chart(document.getElementById('chartMonths'), {
        type: 'line',
        data: {
            labels: monthLabels,
            datasets: [{
                label: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–ª–∞—Ç',
                data: monthValues,
                fill: false,
                borderColor: '#2196F3',
                tension: 0.1
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: { beginAtZero: true }
            }
        }
    });
</script>
{% endblock %}
